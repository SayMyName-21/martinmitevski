<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zad12</title>
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
</head>

<body>
<select id="energySource" onchange="toggleVisibility()">
    <option value="all">Show All</option>
    <option value="solar">Solar</option>
    <option value="wind">Wind</option>
    <option value="hydro">Hydro</option>
</select>

<div id="plot"></div>

<script>

    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zad12</title>
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
</head>

<body>
<select id="energySource" onchange="toggleVisibility()">
    <option value="all">Show All</option>
    <option value="solar">Solar</option>
    <option value="wind">Wind</option>
    <option value="hydro">Hydro</option>
</select>

<div id="plot"></div>

<script>
    let plotData = [];

    function loadData() {
        fetch('energyData.json')
            .then(response => response.json())
            .then(data => {
                plotData = [
                    {
                        x: data.years,
                        y: data.solar,
                        stackgroup: 'one',
                        name: 'Solar',
                        type: 'scatter',
                        mode: 'lines',
                        line: { color: 'gold' },
                        visible: true
                    },
                    {
                        x: data.years,
                        y: data.wind,
                        stackgroup: 'one',
                        name: 'Wind',
                        type: 'scatter',
                        mode: 'lines',
                        line: { color: 'deepskyblue' },
                        visible: true
                    },
                    {
                        x: data.years,
                        y: data.hydro,
                        stackgroup: 'one',
                        name: 'Hydro',
                        type: 'scatter',
                        mode: 'lines',
                        line: { color: 'mediumseagreen' },
                        visible: true
                    }
                ];
                Plotly.newPlot("plot", plotData);
            })
            .catch(error => {
                console.error('Error', error);
            });
    }

    function toggleVisibility() {
        const selection = document.getElementById('energySource').value;
        const visibleArray = [false, false, false];

        if (selection === "all") {
            visibleArray.fill(true);
        } else if (selection === "solar") {
            visibleArray[0] = true;
        } else if (selection === "wind") {
            visibleArray[1] = true;
        } else if (selection === "hydro") {
            visibleArray[2] = true;
        }

        Plotly.update("plot",
            { visible: visibleArray },
            {},
            [0, 1, 2]
        );
    }

    loadData();
</script>

</body>
</html>

